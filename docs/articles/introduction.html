<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Introduction to loon • loon</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Introduction to loon">
<meta property="og:description" content="">
<meta property="og:image" content="/logo.png">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">loon</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.2.3</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../articles/introduction.html">Intro</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/introduction.html">Introduction</a>
    </li>
    <li>
      <a href="../articles/minorities.html">Analysis example</a>
    </li>
    <li>
      <a href="../articles/teaching-example-smoothing.html">Teaching example</a>
    </li>
    <li>
      <a href="../articles/Rmarkdown.html">Using with Rmarkdown</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Videos
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="https://youtu.be/JFJcg855HcQ">the (not so) humble (interactive) histogram</a>
    </li>
    <li>
      <a href="https://youtu.be/mMJllGOuDLY">3D interactive scatterplots</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/great-northern-diver/loon">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Introduction to loon</h1>
                        <h4 class="author">R.W. Oldford</h4>
            
            <h4 class="date">2019-07-18</h4>
      
      
      <div class="hidden name"><code>introduction.Rmd</code></div>

    </div>

    
    
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(loon)</code></pre></div>
<blockquote>
<p>“Exposure, the effective laying open of the data to display the unanticipated, is to us a major portion of data analysis.” … John Tukey and Martin Wilk (1966)</p>
</blockquote>
<p>Because loon is an interactive visualization system, this introduction is meant as a “hands on” tutorial. Not all interactions are from the command line (programmatic). Suggestions for interactions will also be given and questions that draw attention to the outcome of interactions.</p>
<p>After completing the tutorial, there are numerous other examples of using loon which can be explored. These include</p>
<ul>
<li>the <code>R</code> <code><a href="https://www.rdocumentation.org/packages/utils/topics/help">help(package = "loon")</a></code> pages for <code>loon</code>, or alternatively online via as <code><a href="../reference/l_web.html">l_web()</a></code>
</li>
<li>other vignettes,</li>
<li>demos on particular topics given by <code><a href="https://www.rdocumentation.org/packages/utils/topics/demo">demo(package = "loon")</a></code>. These are especially useful because the source code for creating them appears in the console, and</li>
<li>the loon website appearing from <code><a href="../reference/l_help.html">l_help()</a></code> or <code>R</code> manual only as <code><a href="../reference/l_web.html">l_web()</a></code>.</li>
</ul>
<p>Here, we will walk through some of the <strong>basic</strong> functionality.</p>
<hr>
<div id="l_plot-the-basic-loon-plot" class="section level1">
<h1 class="hasAnchor">
<a href="#l_plot-the-basic-loon-plot" class="anchor"></a><code><a href="../reference/l_plot.html">l_plot()</a></code> the basic <code>loon</code> plot</h1>
<p>Begin with a simple scatterplot of the <code>quakes</code> data from <code>R</code></p>
<pre><code>## [1] ".l0.plot"
## attr(,"class")
## [1] "l_plot" "loon"</code></pre>
<p>This prints the above information on the loon plot (more on this later) and causes two windows to appear.</p>
<p>One is the scatterplot:</p>
<p><img src="images/intro/quakesOriginal.png" width="60%" style="display: block; margin: auto;"></p>
<p>and the other a “loon inspector”:</p>
<p><img src="images/intro/inspectorQuakesOriginal.png" width="30%" style="display: block; margin: auto;"></p>
<p>For the moment we’ll focus mainly on the scatterplot.</p>
<hr>
<div id="direct-manipulation-on-the-plot" class="section level2">
<h2 class="hasAnchor">
<a href="#direct-manipulation-on-the-plot" class="anchor"></a>Direct manipulation on the plot</h2>
<p>The loon scatterplot is highly interactive and can be <strong>directly manipulated</strong> using the mouse. Several interactions are immediately available.</p>
<p>In what follows, images of a two button mouse (left is primary, right secondary) with a scroll wheel will be used to indicate the interaction. The colour red indicates selection, arrows and double images suggest movement, and any modifier keys are shown in the body of the mouse.</p>
<hr>
<div id="panning" class="section level3">
<h3 class="hasAnchor">
<a href="#panning" class="anchor"></a>Panning</h3>
<p>To pan the plot, select the plot interior with the right (or secondary) mouse button and move the mouse (with the button still down). The direction of panning can be constrained by holding down the named modifier keys while panning.</p>

<p><img src="images/intro/panning.png" width="40%" style="display: block; margin: auto;"></p>
<p>Try it. Select anywhere on the scatterplot and move it</p>
<ul>
<li>freely about</li>
<li>only horizontally</li>
<li>only vertically</li>
</ul>
<p><strong>Question</strong>: How did the inspector change in response to each movement?</p>
<p>Reproduce these movements on the smaller “World View” plot appearing at the top of the inspector.</p>
<p>How does the larger scatterplot change?</p>
<hr>
</div>
<div id="zooming" class="section level3">
<h3 class="hasAnchor">
<a href="#zooming" class="anchor"></a>Zooming</h3>
<p>Another way to dynamically focus on different parts of the plot is by zooming, using <strong>scrolling</strong>:</p>

<p><img src="images/intro/zooming.png" width="40%" style="display: block; margin: auto;"></p>
<p>To try it, note that there is a small cluster of 16 points towards the top left of the scatterplot.</p>
<p>On the scatterplot,</p>
<ul>
<li><p>zoom in and out and move the plot around until <strong>only</strong> these 16 points appear in the scatterplot</p></li>
<li><p>use the restricted horizontal and vertical zooming so that the same 16 points occupy as much of the scatterplot’s space as possible</p></li>
</ul>
<p><strong>Question</strong>: How has the inspector changed in response?</p>
<p>On the inspector click on the button titled <code>plot</code>. What happened?</p>
<p>Using zooming and panning on the “World View”</p>
<ul>
<li>focus the scatterplot on the <strong>same</strong> 16 points.</li>
</ul>
<hr>
</div>
<div id="selecting" class="section level3">
<h3 class="hasAnchor">
<a href="#selecting" class="anchor"></a>Selecting</h3>
<p>There are two ways to directly select points on the scatterplot using the mouse: either by selection (one at a time or multiple selections) or by “sweep selection” as shown below:</p>
<p><img src="images/intro/selecting.png" width="40%" style="display: block; margin: auto;"></p>
<p>To try this out, on the scatterplot (which should contain only 16 points)</p>
<ul>
<li>place the mouse over the topmost point and click the left (or primary) mouse button
<ul>
<li>the point will be highlighted (magenta coloured)</li>
</ul>
</li>
<li>hold the shift key down and select the leftmost, rightmost and bottom most points of the 16
<ul>
<li>there should now be 4 magenta points</li>
</ul>
</li>
<li>colour these 4 points light blue and change their glyph to a triangle
<ul>
<li>click on the background of the plot to see the change in colour</li>
</ul>
</li>
</ul>
<p><strong>Question</strong>: How has the inspector changed?</p>
<p>Now try a holding the left mouse button down and move the mouse.</p>
<p>This is called <strong>sweeping</strong> or <strong>sweep selection</strong> and allows us to sweep out a contiguous area of the plot.</p>
<ul>
<li>use sweep select to identify, and give different colours (none black) to 4 different (roughly) contiguous groups of your choice from the 16 points.</li>
</ul>
<p><strong>Check</strong>: The 16 points should now be separated by colour into 4 groups and by glyph shape into 2 groups.</p>
<p><strong>Question</strong>: How has the inspector changed?</p>
<p>You will have already discovered how to colour selected points from the inspector. You can now use the inspector to <strong>select</strong> points by colour:</p>
<ul>
<li>
<strong>from the inspector</strong>, select all the points of each colour in turn.</li>
</ul>
<hr>
</div>
</div>
<div id="the-inspector-interacting-with-the-plot" class="section level2">
<h2 class="hasAnchor">
<a href="#the-inspector-interacting-with-the-plot" class="anchor"></a>The inspector – interacting with the plot</h2>
<p>By the above experimentation, you will have already discovered how the inspector is used to change the loon plot.</p>
<p>For example, try checking the “guides” box on the inspector to place a background grid of guide lines on the loon plot. Unchecking removes the guide lines.</p>
<p>The loon inspector consists of several component pieces.</p>
<p>At the top is the “World View” which shows a miniature version of the <strong>whole</strong> of the current plot, what is displayed there, and what is active.</p>
<p>Below the “World View” are a few tabs. The default (and most used) one is the “Analysis” tab where common interactions are separated into three regions: the “Plot”, the “Select”, and the “Modify” systems.</p>
<p>Try (in order) the following interactions between the inspector and the plot:</p>
<ol style="list-style-type: decimal">
<li>select the black points only<br>
</li>
<li>scale the plot to the selected points</li>
<li>invert the selection</li>
<li>colour the selected points red</li>
<li>select all points, and make them all have open circles as glyphs</li>
<li>select the red points and deactivate them</li>
<li>select brushing mode</li>
<li>brush select the remaining black points dividing them into two groups</li>
<li>colour one of these groups blue, the other orange</li>
<li>turn off the brush</li>
<li>re-activate the points</li>
<li>scale the scatterplot to the “world”</li>
<li>add guides (<strong>no</strong> scales)</li>
</ol>
<p><strong>Check</strong>: You should have a scatterplot of open circles with three clusters of points in red, blue, and orange</p>
<hr>
</div>
<div id="more-on-direct-manipulation" class="section level2">
<h2 class="hasAnchor">
<a href="#more-on-direct-manipulation" class="anchor"></a>More on direct manipulation</h2>
<div id="on-brushing" class="section level3">
<h3 class="hasAnchor">
<a href="#on-brushing" class="anchor"></a>on brushing</h3>
<p>You should have a scatterplot of open circles with three clusters of points in red, blue, and orange.</p>
<p>Use the functionality of the loon inspector to (in order)</p>
<ol style="list-style-type: decimal">
<li>Using only colour selection from the inspector, select the largest group (and no others)</li>
<li>Turn on brushing (as opposed to sweeping) mode</li>
<li>Under <strong>dynamic</strong> selection, choose <strong>deselect</strong>
</li>
<li>Over the scatterplot use this brush mode to <strong>deselect</strong> the region nearest the highest density (shaped a bit like a question mark – ?)</li>
<li>Colour the selected points green (i.e. low density region of largest coloured group)</li>
</ol>
<p>You should now have four different coloured groups or clusters.</p>
<p><strong>For fun</strong>, in the inspector</p>
<ol style="list-style-type: decimal">
<li>select the green group</li>
<li>under <strong>dynamic</strong> selection, choose <strong>invert</strong>
</li>
<li>move the brush over the scatterplot</li>
<li>move the brush over the scatterplot while holding the <code>&lt;Shift&gt;</code> key</li>
</ol>
<p><strong>Question</strong>: What is going on? When might this functionality be useful?</p>
<hr>
</div>
<div id="on-selection" class="section level3">
<h3 class="hasAnchor">
<a href="#on-selection" class="anchor"></a>on selection</h3>
<p>When done, turn the selection back to the defaults:</p>
<p><img src="images/intro/inspectorSelectDefaults.png" width="40%" style="display: block; margin: auto auto auto 0;"></p>
<p>That is,</p>
<ul>
<li>[static:] none</li>
<li>[dynamic:] select</li>
<li>[by:] sweeping</li>
</ul>
<p>Shift selection works with any mix of</p>
<ul>
<li>individual point selection</li>
<li>static selection</li>
<li>dynamic selection by sweeping or brushing</li>
<li>by color</li>
</ul>
<p><strong>Exercise</strong>: Try out different combinations of the above selections.</p>
<hr>
</div>
<div id="moving-points" class="section level3">
<h3 class="hasAnchor">
<a href="#moving-points" class="anchor"></a>moving points</h3>
<p>For a variety of reasons, we sometimes want to (temporarily) move points in a scatterplot.</p>
<p>From the inspector:</p>
<ol style="list-style-type: decimal">
<li>deactivate all but the small red group</li>
<li>select the red group and scale the plot to the selected</li>
<li>with these selected points, explore the effect of each of the <code>move</code> modifications on the configuration of the selected points</li>
<li>describe in words what each one does</li>
</ol>
<p>From the scatterplot, selected points may be moved by hand</p>
<ul>
<li>one at a time using <code>&lt;Ctrl&gt;-&lt;Left-button&gt;</code>
</li>
<li>in groups using <code>&lt;Shift&gt;&lt;Ctrl&gt;&lt;Left-button&gt;</code>
</li>
</ul>
<p>For example:</p>
<ol style="list-style-type: decimal">
<li>select the red group</li>
<li>move the red group to the bottom of the plot</li>
<li>return the red group to its original location</li>
</ol>
<hr>
</div>
<div id="adding-colours-to-the-inspector" class="section level3">
<h3 class="hasAnchor">
<a href="#adding-colours-to-the-inspector" class="anchor"></a>adding colours to the inspector</h3>
<p><img src="images/intro/inspectorQuakesPlus10Cols.png" width="30%" style="display: block; margin: auto;"></p>
<p>More colours can be added directly by clicking on the <code>+</code> or the <code>+5</code> in the colour modification section of the inspector.</p>
<ul>
<li>clicking <code>+5</code> twice adds 10 new colours</li>
<li>these colours will persist with the inspector for every loon scatterplot the inspector palette of colours</li>
</ul>
<p>The loon system <strong>default</strong> list of colours get be found programmatically:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/l_getColorList.html">l_getColorList</a></span>()</code></pre></div>
<pre><code>##  [1] "gray60"    "#A6CEE3"   "pink"      "#B2DF8A"   "#FDBF6F"  
##  [6] "#FFFF99"   "#CAB2D6"   "#DEB887"   "#CDC673"   "lightgrey"
## [11] "white"     "gray10"    "#1F78B4"   "#E31A1C"   "#33A02C"  
## [16] "#FF7F00"   "#FFFF00"   "#6A3D9A"   "#B15928"   "#8B864E"  
## [21] "gray40"</code></pre>
<p>Note:</p>
<ul>
<li>loon colours are 6 hexadecimal digits in length and can be a named <code>R</code> colour</li>
<li>being constrained to tcl/tk colours, no alpha level is available at this time in loon</li>
<li>
<p><code>R</code> has a similar set of base colours that is default for all its graphics devices:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="https://www.rdocumentation.org/packages/grDevices/topics/palette">palette</a></span>()</code></pre></div>
<pre><code>## [1] "black"   "red"     "green3"  "blue"    "cyan"    "magenta" "yellow" 
## [8] "gray"</code></pre>
</li>
<li><p>like the <code>R</code> palette, the loon inspector palette persists.</p></li>
</ul>
<hr>
</div>
<div id="changing-the-inspector-palette-of-colours" class="section level3">
<h3 class="hasAnchor">
<a href="#changing-the-inspector-palette-of-colours" class="anchor"></a>changing the inspector palette of colours</h3>
<p>At the <strong>beginning of a loon session</strong> (that is, immediately after executing <code><a href="https://www.rdocumentation.org/packages/base/topics/library">library(loon)</a></code>) you might choose to change the default palette for the inspector to something that suits your tastes/problem.</p>
<p><strong>Note</strong>: There may be unintended side effects to changing the inspector colours after a plot (and hence the inspector) has been created so this should be avoided.</p>
<p>A variety of functions exist to change an inspector’s palette of colours:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/l_setColorList_baseR.html">l_setColorList_baseR</a></span>()  <span class="co"># base R palette</span>
<span class="kw"><a href="../reference/l_setColorList_ColorBrewer.html">l_setColorList_ColorBrewer</a></span>(<span class="st">"Set2"</span>)  <span class="co"># colorblind friendly choice from ColorBrewer</span>
<span class="kw"><a href="../reference/l_setColorList_hcl.html">l_setColorList_hcl</a></span>(<span class="dt">luminance =</span> <span class="dv">80</span>)  <span class="co"># set of hcl colours</span>
<span class="kw"><a href="../reference/l_setColorList_ggplot2.html">l_setColorList_ggplot2</a></span>()  <span class="co"># ggplot2's palette </span>
<span class="kw"><a href="../reference/l_setColorList_loon.html">l_setColorList_loon</a></span>()  <span class="co"># default loon palette</span>
<span class="kw"><a href="../reference/l_setColorList.html">l_setColorList</a></span>(<span class="kw"><a href="../reference/l_colRemoveAlpha.html">l_colRemoveAlpha</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/grDevices/topics/palettes">rainbow</a></span>(<span class="dv">5</span>)))  <span class="co"># any set of colours without alpha</span></code></pre></div>
<p>To change the palette</p>
<ul>
<li>execute one of these functions</li>
<li>if the inspector is open (not recommended), then select the inspector and close it to force a refresh its colour palette.</li>
</ul>
<p><code><a href="../reference/l_setColorList_loon.html">l_setColorList_loon()</a></code> returns the inspector to the default loon colour palette.</p>
<hr>
</div>
</div>
<div id="programmatic-manipulation" class="section level2">
<h2 class="hasAnchor">
<a href="#programmatic-manipulation" class="anchor"></a>Programmatic manipulation</h2>
<div id="accessing-the-plot" class="section level3">
<h3 class="hasAnchor">
<a href="#accessing-the-plot" class="anchor"></a>accessing the plot</h3>
<p>The plot itself is a (tcl) data structure and can be assigned to an <code>R</code> variable.</p>
<p>Either at construction (the preferable way):</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># loon graphics (note that the result is assigned to p)</span>
p &lt;-<span class="st"> </span><span class="kw"><a href="../reference/l_plot.html">l_plot</a></span>(<span class="dt">x =</span> quakes<span class="op">$</span>long, <span class="dt">y =</span> quakes<span class="op">$</span>lat, 
            <span class="dt">xlabel =</span> <span class="st">"longitude"</span>, <span class="dt">ylabel =</span> <span class="st">"latitude"</span>,
            <span class="dt">title =</span> <span class="st">"Tonga trench earthquakes"</span>)</code></pre></div>
<p>or, if (as we did) you forgot to do that or reassigned something else to that variable (more likely), by accessing the plot from its <code>tcl</code> string:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># accessing the plot from its string representation</span>
p &lt;-<span class="st"> </span><span class="kw"><a href="../reference/l_create_handle.html">l_create_handle</a></span>(<span class="st">".l0.plot"</span>)</code></pre></div>
<p>Note that this string <code>".l0.plot"</code> appears on the right side of the window title of an <code>l_plot</code>.</p>
<p>Do this and assign your plot to <code>p</code>. You might have to look at the window to get the string if you have created more than one <code><a href="../reference/l_plot.html">l_plot()</a></code>.</p>
<hr>
</div>
<div id="printing-the-plot" class="section level3">
<h3 class="hasAnchor">
<a href="#printing-the-plot" class="anchor"></a>printing the plot</h3>
<p>Were we to now print <code>p</code></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">p </code></pre></div>
<pre><code>## [1] ".l2.plot"
## attr(,"class")
## [1] "l_plot" "loon"</code></pre>
<p>we get the string name of the plot, but with a class attribute. This is the <strong>value</strong> of <code>p</code> and provides us access to a very rich data structure, but one whose values reside in <code>tcl</code>.</p>
<p>For example, we can access this value and, like plots from <code>lattice</code> or <code>ggplot2</code> produce a <code>grid</code> data structure that can then be displayed as a <code>grid</code> graphic in <code>R</code>.</p>
<p>The simplest way to achieve this is to use the generic <code>R</code> function <code><a href="https://www.rdocumentation.org/packages/graphics/topics/plot">plot()</a></code></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="https://www.rdocumentation.org/packages/graphics/topics/plot">plot</a></span>(p)</code></pre></div>
<p>Note that this will always reflect the <em>current state of the loon plot</em>. In this way, you can get snapshots of the loon plot after any interaction.</p>
<p><strong>Exercise</strong>: Try this. Change <code>p</code> by direct manipulation in <code>loon</code> and repeat.</p>
<p>This allows the visual representation of a <code>loon</code> plot to be displayed at any time.</p>
<hr>
</div>
<div id="getting-plot-contents" class="section level3">
<h3 class="hasAnchor">
<a href="#getting-plot-contents" class="anchor"></a>getting plot contents</h3>
<p>There are <code>names</code> associated with a loon plot indicating its contents or <strong>states</strong>:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/names">names</a></span>(p)</code></pre></div>
<pre><code>##  [1] "glyph"            "itemLabel"        "showItemLabels"  
##  [4] "linkingGroup"     "linkingKey"       "zoomX"           
##  [7] "zoomY"            "panX"             "panY"            
## [10] "deltaX"           "deltaY"           "xlabel"          
## [13] "ylabel"           "title"            "showLabels"      
## [16] "showScales"       "swapAxes"         "showGuides"      
## [19] "background"       "foreground"       "guidesBackground"
## [22] "guidelines"       "minimumMargins"   "labelMargins"    
## [25] "scalesMargins"    "x"                "y"               
## [28] "xTemp"            "yTemp"            "color"           
## [31] "selected"         "active"           "size"            
## [34] "tag"              "useLoonInspector" "selectBy"        
## [37] "selectionLogic"</code></pre>
<p>These features of <code>p</code> can be directly accessed the <code>[]</code> function.</p>
<p>For example,</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">p[<span class="st">"showGuides"</span>]</code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<p>A more meaningful example might be identify groups with the colours of the points.<br>
This could be done simply as follows</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">unique_cols &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/unique">unique</a></span>(p[<span class="st">'color'</span>])
group1 &lt;-<span class="st"> </span>p[<span class="st">'color'</span>] <span class="op">==</span><span class="st"> </span>unique_cols[<span class="dv">1</span>]
<span class="co"># Number in group 1 (e.g. as you might have -- here from saved colours)</span>
<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/sum">sum</a></span>(group1)</code></pre></div>
<pre><code>## [1] 425</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Data on first few quakes in group 1.</span>
<span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/head">head</a></span>(quakes[group1,])</code></pre></div>
<pre><code>##       lat   long depth mag stations
## 1  -20.42 181.62   562 4.8       41
## 2  -20.62 181.03   650 4.2       15
## 4  -17.97 181.66   626 4.1       19
## 5  -20.42 181.96   649 4.0       11
## 10 -17.47 179.59   622 4.3       19
## 11 -21.44 180.69   583 4.4       13</code></pre>
<p>Alternatively, a function could be written to save the groups as a list of logical vectors (one for each group):</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">getGroups &lt;-<span class="st"> </span><span class="cf">function</span>(loonplot){
    <span class="co"># make sure it is an "l_plot"</span>
    <span class="cf">if</span> (<span class="op">!</span><span class="kw">is</span>(loonplot, <span class="st">"l_plot"</span>)) <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/stop">stop</a></span>(<span class="st">"loonplot must be an l_plot"</span>)
    
    <span class="co"># use color to identify groups</span>
    unique_cols &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/unique">unique</a></span>(loonplot[<span class="st">'color'</span>])
    <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/lapply">lapply</a></span>(unique_cols,
           <span class="dt">FUN =</span> <span class="cf">function</span>(col){loonplot[<span class="st">'color'</span>] <span class="op">==</span><span class="st"> </span>col}
           )
}

myGroups &lt;-<span class="st"> </span><span class="kw">getGroups</span>(p)    <span class="co"># returns groups identified by unique colour in p</span>
nGroups &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/length">length</a></span>(myGroups) <span class="co"># number of groups</span>
group1 &lt;-<span class="st"> </span>myGroups[[<span class="dv">1</span>]]     <span class="co"># each group is an element of the list myGroups</span></code></pre></div>
<p>Similarly, other point symbol characteristics (e.g. <code>size</code>, <code>glyph</code>) might be used to define groups. This is particularly handy when these are first determined interactively.</p>
<hr>
</div>
<div id="setting-plot-contents" class="section level3">
<h3 class="hasAnchor">
<a href="#setting-plot-contents" class="anchor"></a>setting plot contents</h3>
<p>In addition to accessing the state values of a loon plot using <code>[]</code>, its values may also be set using <code>[]</code>. For example, try these:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">p[<span class="st">"showGuides"</span>] &lt;-<span class="st"> </span><span class="ot">TRUE</span>

p[<span class="st">"size"</span>] &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/sample">sample</a></span>(<span class="dv">1</span><span class="op">:</span><span class="dv">30</span>, <span class="dt">size =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/length">length</a></span>(p[<span class="st">"x"</span>]), <span class="dt">replace =</span> <span class="ot">TRUE</span>)

<span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/length">length</a></span>(myGroups))  {
    p[<span class="st">"selected"</span>] &lt;-<span class="st"> </span>myGroups[[i]]
    <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/Sys.sleep">Sys.sleep</a></span>(<span class="dv">1</span>)
}
p[<span class="st">"selected"</span>] &lt;-<span class="st"> </span><span class="ot">FALSE</span>

<span class="co"># something a little more involved for up to 6 groups</span>
myCols &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"firebrick"</span>, <span class="st">"steelblue"</span>, <span class="st">"purple"</span>, 
            <span class="st">"orange"</span>, <span class="st">"grey10"</span>, <span class="st">"grey80"</span>)
<span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/length">length</a></span>(myGroups)) {
    p[<span class="st">"color"</span>][myGroups[[i]]] &lt;-<span class="st"> </span>myCols[i]
}

<span class="co"># something crazy</span>
<span class="cf">for</span> (j <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="dv">10</span>) {
  p[<span class="st">"xTemp"</span>] &lt;-<span class="st"> </span>p[<span class="st">"x"</span>] <span class="op">+</span><span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/Uniform">runif</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/length">length</a></span>(p[<span class="st">"x"</span>]), <span class="dt">min =</span> <span class="op">-</span><span class="fl">0.5</span>, <span class="dt">max =</span> <span class="fl">0.5</span>)
  <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/Sys.sleep">Sys.sleep</a></span>(<span class="fl">0.1</span>)
}

<span class="co"># putting locations and size back</span>
p[<span class="st">"xTemp"</span>] &lt;-<span class="st"> </span>p[<span class="st">"x"</span>]
p[<span class="st">"size"</span>] &lt;-<span class="st"> </span><span class="dv">4</span></code></pre></div>
<hr>
</div>
</div>
<div id="adding-layers" class="section level2">
<h2 class="hasAnchor">
<a href="#adding-layers" class="anchor"></a>Adding layers</h2>
<p><code>loon</code> plots are actually a little richer still. The scatterplot is only one possible layer in a plot. It could have many more, each layer having different geometric objects.</p>
<hr>
<div id="example-adding-maps" class="section level3">
<h3 class="hasAnchor">
<a href="#example-adding-maps" class="anchor"></a>Example: adding maps</h3>
<p>For example, we can add a map to the current loon plot <code>p</code>.</p>
<p>First get the relevant map:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(maps)
NZFijiMap &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/maps/topics/map">map</a></span>(<span class="st">"world2"</span>, <span class="dt">regions =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"New Zealand"</span>, <span class="st">"Fiji"</span>), <span class="dt">plot =</span> <span class="ot">FALSE</span>)</code></pre></div>
<p>It is added as a “layer” to the loon plot</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/l_layer.html">l_layer</a></span>(p, NZFijiMap, 
        <span class="dt">label =</span> <span class="st">"New Zealand and Fiji"</span>,
        <span class="dt">color =</span> <span class="st">"forestgreen"</span>,
        <span class="dt">index =</span> <span class="st">"end"</span>)</code></pre></div>
<pre><code>## loon layer "New Zealand and Fiji" of type polygons of plot .l2.plot
## [1] "layer0"</code></pre>
<p>Try this out.</p>
<p><img src="images/intro/quakesGuidesMapInspector.png" width="30%" style="display: block; margin: auto;"></p>
<p><img src="images/intro/quakesGuidesMap.png" width="50%" style="display: block; margin: auto;"></p>
<p>As can be seen in the world view, much of the map is outside of the plot display (shown as the black-bordered rectangle in the world view).</p>
<p>Now play with the scaling buttons in the loon inspector.</p>
<hr>
</div>
<div id="effect-of-scaling-choices" class="section level3">
<h3 class="hasAnchor">
<a href="#effect-of-scaling-choices" class="anchor"></a>Effect of scaling choices</h3>
<p>Adding the map allows us to see the effect of all three plot scaling choices available in the inspector.</p>
<p>The effect is best seen on the world view:</p>
<p><img src="images/intro/quakesWorldViewScaling.png" width="90%" style="display: block; margin: auto;"></p>
<p>Note that the plot in the world view matches that of the actual plot. Also the aspect ratio changes with the scaling.</p>
<hr>
</div>
<div id="the-layers-tab" class="section level3">
<h3 class="hasAnchor">
<a href="#the-layers-tab" class="anchor"></a>the “Layers” tab</h3>
<p>The map is added as a layer, which can be seen by selecting the “Layers” tab in the inspector:</p>
<p><img src="images/intro/quakesLayersInspector.png" width="70%" style="display: block; margin: auto;"></p>
<p>This allows a lot of interaction with the layers - for example changing their display order, making some of them invisible, grouping layers, and so on.</p>
<hr>
</div>
</div>
<div id="syntax-loons-l_plot-is-like-base-graphics-plot" class="section level2">
<h2 class="hasAnchor">
<a href="#syntax-loons-l_plot-is-like-base-graphics-plot" class="anchor"></a>Syntax: loon’s <code><a href="../reference/l_plot.html">l_plot()</a></code> is like base graphics <code><a href="https://www.rdocumentation.org/packages/graphics/topics/plot">plot()</a></code>
</h2>
<p><code>loon</code>’s <code><a href="../reference/l_plot.html">l_plot()</a></code> syntax <strong>intentionally resembles</strong> that of <code><a href="https://www.rdocumentation.org/packages/graphics/topics/plot">plot()</a></code> from the base <code>graphics</code> package:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Base graphics</span>
<span class="kw"><a href="https://www.rdocumentation.org/packages/graphics/topics/plot">plot</a></span>(<span class="dt">x =</span> quakes<span class="op">$</span>long, <span class="dt">y =</span> quakes<span class="op">$</span>lat, 
     <span class="dt">xlab =</span> <span class="st">"longitude"</span>, <span class="dt">ylab =</span> <span class="st">"latitude"</span>,
     <span class="dt">main =</span> <span class="st">"Tonga trench earthquakes"</span>)

<span class="co"># loon graphics</span>
<span class="kw"><a href="../reference/l_plot.html">l_plot</a></span>(<span class="dt">x =</span> quakes<span class="op">$</span>long, <span class="dt">y =</span> quakes<span class="op">$</span>lat, 
       <span class="dt">xlabel =</span> <span class="st">"longitude"</span>, <span class="dt">ylabel =</span> <span class="st">"latitude"</span>,
       <span class="dt">title =</span> <span class="st">"Tonga trench earthquakes"</span>)</code></pre></div>
<p>The arguments to <code><a href="../reference/l_plot.html">l_plot()</a></code> provide initial values to each named state. Note that the argument names in <code>l_plot</code> are slightly different.</p>
<p>In result, however, loon plots are quite different</p>
<ul>
<li>displays <strong>look different</strong>
</li>
<li>
<code><a href="../reference/l_plot.html">l_plot()</a></code> <strong>returns a data structure</strong>; <code><a href="https://www.rdocumentation.org/packages/graphics/topics/plot">plot()</a></code> does not
<ul>
<li>a rich data structure with many states</li>
<li>can be transformed to a grob</li>
</ul>
</li>
<li>the <code>loon</code> plot is <strong>highly interactive</strong>
<ul>
<li>either from the inspector</li>
<li>or programmatically</li>
</ul>
</li>
</ul>
<p>In loon, the function <code><a href="../reference/plot.loon.html">plot.loon()</a></code> is a <strong>method</strong> of the base <code><a href="https://www.rdocumentation.org/packages/graphics/topics/plot">plot()</a></code> generic function that turns the loon plot (as the first argument of <code><a href="../reference/plot.loon.html">plot.loon()</a></code>) into a grid object and plots it on the current <code>R</code> graphics device.</p>
<hr>
</div>
</div>
<div id="l_hist-the-loon-histogram" class="section level1">
<h1 class="hasAnchor">
<a href="#l_hist-the-loon-histogram" class="anchor"></a><code><a href="../reference/l_hist.html">l_hist()</a></code> the <code>loon</code> histogram</h1>
<p>As seen earlier, the <code>quakes</code> data has some other variates in addition to the latitude and longitude of the quakes.</p>
<p>Before starting, make sure that you have the four groups coloured in the loon plot <code>p</code> as described earlier. If you don’t, then colour them again now.</p>
<p>Let’s consider a histogram of the <code>depth</code> of each earthquake.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">h &lt;-<span class="st"> </span><span class="kw"><a href="../reference/l_hist.html">l_hist</a></span>(quakes<span class="op">$</span>depth, 
            <span class="dt">xlabel =</span> <span class="st">"depth"</span>, 
            <span class="dt">title =</span> <span class="st">"Tonga trench earthquakes"</span>)</code></pre></div>
<p>Note that the inspector has changed. There is a different inspector for each type of base loon plot.</p>
<p><strong>Exercise</strong>:</p>
<ul>
<li>in the plot section of the histogram inspector, select <code>yshows: density</code>
</li>
<li>on the histogram, see how individual bars can be selected</li>
<li>what happens when you modify the colour?</li>
<li>on the histogram, what is the (interactive) function of the small grey object?
<ul>
<li>how can you make it go away?</li>
</ul>
</li>
<li>on the histogram inspector, turn on stacked colours</li>
<li>select colours on the histogram</li>
</ul>
<hr>
</div>
<div id="linking" class="section level1">
<h1 class="hasAnchor">
<a href="#linking" class="anchor"></a>Linking</h1>
<p>Now that we have both a scatterplot and a histogram, we can explore one of the most important features of an interactive data visualization system like loon.</p>
<div id="linkinggroup" class="section level2">
<h2 class="hasAnchor">
<a href="#linkinggroup" class="anchor"></a><code>linkingGroup</code>
</h2>
<p>The principal feature of loon plots which effect the linking of displays is the setting of a common <code>linkingGroup</code>.</p>
<ul>
<li><p>On the histogram inspector, where it says linking group, select the text “none” and replace it with “quakes”</p></li>
<li><p>On the scatterplot inspector, if you do the same you will now be prompted to either “push” or “pull”. Select “push”.</p></li>
<li>
<p><strong>NOTE</strong>: Programmatically, we might have tried to set the linking group directly on the plot as</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">h[<span class="st">"linkingGroup"</span>] &lt;-<span class="st"> "quakes"</span>
p[<span class="st">"linkingGroup"</span>] &lt;-<span class="st"> "quakes"</span></code></pre></div>
<p>but <strong>this would have resulted in an error</strong>. The problem is that the synchronization must be set at the same time to determine where the linked states are to be drawn from. To effect this, the loon command <code>l_confiure()</code> must be used whenever <strong>two or more states are to be set simultaneously</strong>. The correct programmatic setting of the “linkingGroup” is</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/l_configure.html">l_configure</a></span>(h, <span class="dt">linkingGroup =</span> <span class="st">"quakes"</span>, <span class="dt">sync =</span> <span class="st">"push"</span>)
<span class="kw"><a href="../reference/l_configure.html">l_configure</a></span>(p, <span class="dt">linkingGroup =</span> <span class="st">"quakes"</span>, <span class="dt">sync =</span> <span class="st">"pull"</span>)</code></pre></div>
<p>This causes <code>h</code> to push its linked states to the “quakes” group and <code>p</code> to pull them from the “quakes” group. (In this example, “pull” could have been used in both cases and is generally recommended.)</p>
</li>
<li><p>brush the scatterplot and observe the effects in the histogram</p></li>
<li>brush the histogram and observe the effects in the scatterplot
<ul>
<li>shape the brush so that it is tall and thin</li>
<li>brush from left to right and right to left (i.e. from shallow to deeper earthquake depths)</li>
</ul>
</li>
<li>
<p>could also set colours programmatically on the histogram. Here we colour the histogram bars so that those earthquakes that are deepest are darkest.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">blues5 &lt;-<span class="st"> </span>blues9[<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="dv">2</span>,<span class="dv">4</span>,<span class="dv">6</span>,<span class="dv">8</span>,<span class="dv">9</span>)] <span class="co"># select 5 from light blue to dark</span>
h[<span class="st">"color"</span>] &lt;-<span class="st"> </span>blues5[<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/cut">cut</a></span>(quakes<span class="op">$</span>depth, <span class="dt">breaks=</span><span class="dv">5</span>)] <span class="co"># assign colours by depth</span>
p[<span class="st">"glyph"</span>] &lt;-<span class="st"> "ccircle"</span>
p[<span class="st">"showGuides"</span>] &lt;-<span class="st"> </span><span class="ot">TRUE</span>
<span class="co"># plot(p) # will print the plot</span></code></pre></div>
</li>
</ul>
<hr>
</div>
<div id="linking-many-plots" class="section level2">
<h2 class="hasAnchor">
<a href="#linking-many-plots" class="anchor"></a>linking many plots</h2>
<p>Arbitrarily many plots may be created and linked in loon.</p>
<p>Consider, for example, adding two more histograms to the same <code>linkingGroup</code>. Note that the linking is done at creation and that the synchronization is by default a “pull”.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">h_mag &lt;-<span class="st"> </span><span class="kw"><a href="../reference/l_hist.html">l_hist</a></span>(<span class="dt">x =</span> quakes<span class="op">$</span>mag, 
                <span class="dt">linkingGroup =</span> <span class="st">"quakes"</span>, 
                <span class="dt">showStackedColors =</span> <span class="ot">TRUE</span>,
                <span class="dt">yshows =</span> <span class="st">"density"</span>,
                <span class="dt">xlabel =</span> <span class="st">"magnitude"</span>)

h_stations &lt;-<span class="st"> </span><span class="kw"><a href="../reference/l_hist.html">l_hist</a></span>(<span class="dt">x =</span> quakes<span class="op">$</span>stations, 
                     <span class="dt">linkingGroup =</span> <span class="st">"quakes"</span>, 
                     <span class="dt">showStackedColors =</span> <span class="ot">TRUE</span>,
                     <span class="dt">yshows =</span> <span class="st">"density"</span>,
                     <span class="dt">xlabel =</span> <span class="st">"Number of stations reporting"</span>)</code></pre></div>
<p>Brush to show the relationship between magnitude of the earthquake and the number of stations reporting.</p>
<p>Alternatively, we could look at a linked scatterplot of these two variates and explore their relationship conditional on <code>depth</code></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">p_mag_stations &lt;-<span class="st"> </span><span class="kw"><a href="../reference/l_plot.html">l_plot</a></span>(<span class="dt">x =</span> quakes<span class="op">$</span>mag, 
                         <span class="dt">y =</span> quakes<span class="op">$</span>stations, 
                         <span class="dt">showGuides =</span> <span class="ot">TRUE</span>,
                         <span class="dt">glyph =</span> <span class="st">"ccircle"</span>,
                         <span class="dt">linkingGroup =</span> <span class="st">"quakes"</span>, 
                         <span class="dt">xlabel =</span> <span class="st">"Magnitude"</span>, 
                         <span class="dt">ylabel =</span> <span class="st">"Number of stations reporting"</span>)</code></pre></div>
<p>Brushing any one of these plots will cause the other plots to highlight in response.</p>
<p>Note that selection effectively shows the relations in one plot <strong>conditional</strong> upon the values actively being selected (e.g. brushed) in another.</p>
</div>
<div id="linkingkey" class="section level2">
<h2 class="hasAnchor">
<a href="#linkingkey" class="anchor"></a><code>linkingKey</code>
</h2>
<p>Observations in a <code>loon</code> plot are uniquely identified (for the purpose of linking) by their <code>linkingKey</code>. Pardon the pun but this is the key to linking in <code>loon</code>.</p>
<p>For the most part, the default linking is all that you ever need do.<br>
Trouble may arise, however, if you want to link two different plots that were created with different data frames whose rows so not match row for row. For example, one <code>data.frame</code> might be a re-ordering of the rows of the other. Or, it might be a subset of the rows of the other.</p>
<p>In either case, to have linking work properly the <code>linkingKey</code> of the plots associated with the two data frames need to be managed.</p>
<p>For example,</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">new_order &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/sample">sample</a></span>(<span class="dv">1</span><span class="op">:</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/nrow">nrow</a></span>(quakes), <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/nrow">nrow</a></span>(quakes), <span class="dt">replace =</span> <span class="ot">FALSE</span>)
some_quakes &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/sample">sample</a></span>(<span class="dv">1</span><span class="op">:</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/nrow">nrow</a></span>(quakes), <span class="dv">100</span>, <span class="dt">replace =</span> <span class="ot">FALSE</span>)
quakes_linkingKey &lt;-<span class="st"> </span>p[<span class="st">"linkingKey"</span>]
p_new &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/with">with</a></span>(quakes[new_order, ], <span class="kw"><a href="../reference/l_plot.html">l_plot</a></span>(long, lat, <span class="dt">title =</span> <span class="st">"quakes reordered"</span>, 
    <span class="dt">linkingGroup =</span> <span class="st">"quakes"</span>, <span class="dt">linkingKey =</span> quakes_linkingKey[new_order]))
p_subset &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/with">with</a></span>(quakes[some_quakes, ], <span class="kw"><a href="../reference/l_plot.html">l_plot</a></span>(long, lat, <span class="dt">title =</span> <span class="st">"quakes reordered"</span>, 
    <span class="dt">linkingGroup =</span> <span class="st">"quakes"</span>, <span class="dt">linkingKey =</span> quakes_linkingKey[some_quakes]))</code></pre></div>
<p>The new plots <code>p_new</code> and <code>p_subset</code> will link correctly with all the rest.</p>
<p>Rather than the default values, the <code>linkingKey</code> can be any vector of unique strings used in any newly created plot as above. Of course, not using the default linking keys from <code>loon</code> may require a little more care in management from the user.</p>
<hr>
</div>
</div>
<div id="three-dimensional-plots---l_plot3d" class="section level1">
<h1 class="hasAnchor">
<a href="#three-dimensional-plots---l_plot3d" class="anchor"></a>Three dimensional plots - <code>l_plot3D</code>
</h1>
<p>Given that the <code>quakes</code> data has three spatial dimensions (<code>long</code>, <code>lat</code>, and <code>depth</code>), it would be natural to view this in a three dimensional scatterplot.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># First, scale the data</span>
scaled_quakes &lt;-<span class="st"> </span><span class="kw"><a href="../reference/l_scale3D.html">l_scale3D</a></span>(quakes)

p_mag_stations &lt;-<span class="st"> </span><span class="kw"><a href="../reference/l_plot3D.html">l_plot3D</a></span>(<span class="dt">x =</span> scaled_quakes<span class="op">$</span>long,  
                           <span class="dt">y =</span> scaled_quakes<span class="op">$</span>lat, 
                           <span class="dt">z =</span> scaled_quakes<span class="op">$</span>depth, 
                           <span class="dt">showGuides =</span> <span class="ot">TRUE</span>,
                           <span class="dt">linkingGroup =</span> <span class="st">"quakes"</span>, 
                           <span class="dt">title =</span> <span class="st">"Three dimensional plot of quakes"</span>)</code></pre></div>
<p>Select the plot, type <code>r</code> to turn on the <code>rotation mode</code>. Press the down arrow on the keyboard until the darkest points (deepest quakes) are at the bottom of the display. Press <code>r</code> again to turn off the rotation mode.</p>
<p>Selecting the plot, the key <code>r</code> toggles the rotation mode; arrow keys rotate the plot vertically and horizontally. In <code>rotation mode</code> the plot may also be rotated free hand using the mouse. When <code>rotation mode</code> is toggled off (with the key <code>r</code>), the plot can again be brushed et cetera as with any <code>l_plot</code>. See <code><a href="https://www.rdocumentation.org/packages/utils/topics/help">help("l_plot3D")</a></code> for more details.</p>
<p><strong>NOTE</strong> Many methods exist for visualizing higher dimensional data in <code>loon</code>. For e.g. see <code><a href="https://www.rdocumentation.org/packages/utils/topics/help">help("l_navgraph")</a></code>, <code><a href="https://www.rdocumentation.org/packages/utils/topics/help">help("l_pairs")</a></code>, or <code><a href="https://www.rdocumentation.org/packages/utils/topics/help">help("l_serialaxes")</a></code>. See also the online manual <code><a href="../reference/l_web.html">l_web()</a></code>.</p>
<hr>
</div>
<div id="extras" class="section level1">
<h1 class="hasAnchor">
<a href="#extras" class="anchor"></a>Extras</h1>
<p>Miscellaneous other topics on and sources of working and programming with <code>loon</code>.</p>
<hr>
<div id="more-examples" class="section level2">
<h2 class="hasAnchor">
<a href="#more-examples" class="anchor"></a>More examples</h2>
<p>Being able to get and set the plot contents means that it is possible to capture different plot states as <code>grobs</code>. There are a variety of ways to see how you might put <code>loon</code> to use.</p>
<p>There are of course many smaller examples available through the <code>loon</code>’s <code>R</code> documentation available via</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/help">help</a></span>(<span class="dt">package =</span> <span class="st">"loon"</span>)</code></pre></div>
<p>and more complex examples and more general discussion via <code>loon</code>’s online help</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/l_help.html">l_help</a></span>()
<span class="co"># or more simply via the online manual</span>
<span class="kw"><a href="../reference/l_web.html">l_web</a></span>()</code></pre></div>
<hr>
<div id="other-vignettes" class="section level3">
<h3 class="hasAnchor">
<a href="#other-vignettes" class="anchor"></a>Other vignettes</h3>
<p>Other vignettes have been developed to cover a range of topics. These currently include:</p>
<ul>
<li>
<p>An example exploratory analysis: “Visible minorities in Canadian cities” available via</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/vignette">vignette</a></span>(<span class="st">"minorities"</span>, <span class="dt">package =</span> <span class="st">"loon"</span>)</code></pre></div>
<p>This illustrates a variety of <code>loon</code> features including map layers, parallel coordinate axes, and radial axes glyphs in the context of an exploratory analysis of the distribution of visible minorities in 33 Canadian cities.</p>
</li>
<li>
<p>New interactive graphics in <code>loon</code> in a teaching example: “Smoothers and Bone Mineral Density” available via</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/vignette">vignette</a></span>(<span class="st">"teaching-example-smoothing"</span>, <span class="dt">package =</span> <span class="st">"loon"</span>)</code></pre></div>
<p>This illustrates how to create new interactions in <code>loon</code> through more general bindings. This is done by developing a teaching tool for explaining how smoothing works. The example data set is <code>bone</code> from the <code>ElemStatLearn</code> package.</p>
</li>
<li>
<p>Some suggestions on integrating <code>loon</code> plots into an Rmarkdown document: “Loon in RMarkdown” via</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/vignette">vignette</a></span>(<span class="st">"Rmarkdown"</span>, <span class="dt">package =</span> <span class="st">"loon"</span>)</code></pre></div>
</li>
</ul>
<hr>
</div>
<div id="loon-demos" class="section level3">
<h3 class="hasAnchor">
<a href="#loon-demos" class="anchor"></a>loon demos</h3>
<p>There are numerous demos in loon whose source code might be examined for more examples of using <code>loon</code>. To see them all</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/demo">demo</a></span>(<span class="dt">package =</span> <span class="st">"loon"</span>)  <span class="co"># list all demos</span></code></pre></div>
<p>The range is quite broad. For example,</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">### teaching demos
<span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/demo">demo</a></span>(<span class="st">"l_regression"</span>, <span class="dt">package =</span> <span class="st">"loon"</span>)  <span class="co"># lots using the Old Faithful geyser</span>
<span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/demo">demo</a></span>(<span class="st">"l_regression_influential"</span>, <span class="dt">package =</span> <span class="st">"loon"</span>)  <span class="co"># move and recolor points to change the regression fit</span>

### gapminder
<span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/demo">demo</a></span>(<span class="st">"l_us_and_them"</span>, <span class="dt">package =</span> <span class="st">"loon"</span>)  <span class="co">#  basic demo</span>
<span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/demo">demo</a></span>(<span class="st">"l_us_and_them_slider"</span>, <span class="dt">package =</span> <span class="st">"loon"</span>)  <span class="co"># year selected on a slider</span>
<span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/demo">demo</a></span>(<span class="st">"l_us_and_them_choropleth"</span>, <span class="dt">package =</span> <span class="st">"loon"</span>)  <span class="co"># world map and linked with a scatterplot</span>

### the spatial package sp
<span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/demo">demo</a></span>(<span class="st">"l_polygons_sp"</span>, <span class="dt">package =</span> <span class="st">"loon"</span>)  <span class="co"># layer polygons with class sp </span>

### layering and custom layouts
<span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/demo">demo</a></span>(<span class="st">"l_layers"</span>)  <span class="co"># demonstrate layer types   </span>
<span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/demo">demo</a></span>(<span class="st">"l_layout"</span>)  <span class="co"># custom layout widgets      </span>
<span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/demo">demo</a></span>(<span class="st">"l_widgets"</span>)  <span class="co"># inspector and plot in one window</span>

### novel brushing and linking
<span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/demo">demo</a></span>(<span class="st">"l_knn"</span>)  <span class="co"># brushing by k nearest points in some subspace</span>
<span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/demo">demo</a></span>(<span class="st">"l_us_and_them_choropleth"</span>)  <span class="co"># many to one linking </span>

### high dimensional data and dimensionality reduction
<span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/demo">demo</a></span>(<span class="st">"l_ng_images_frey_LLE"</span>)  <span class="co"># navigation graphs, image data, LLE</span>
<span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/demo">demo</a></span>(<span class="st">"l_ng_dimred"</span>)  <span class="co"># comparing dimension reduction methods</span></code></pre></div>
<p>The code that appears in the console after the demo can be examined and reused to create your own loony <code>loon</code> code.</p>
<hr>
</div>
</div>
<div id="extensions-to-loon-via-other-packages" class="section level2">
<h2 class="hasAnchor">
<a href="#extensions-to-loon-via-other-packages" class="anchor"></a>Extensions to loon via other packages</h2>
<div id="zenplots" class="section level3">
<h3 class="hasAnchor">
<a href="#zenplots" class="anchor"></a><code>zenplots</code>
</h3>
<p>This package is available on CRAN.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/install.packages">install.packages</a></span>(<span class="st">"zenplots"</span>)
<span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/vignette">vignette</a></span>(<span class="st">"intro"</span>, <span class="dt">package =</span> <span class="st">"zenplots"</span>)</code></pre></div>
<p>Provides a means for compact layout of alternating 1d (e.g. histograms) and 2d (e.g. scatterplots) plots. In will layout base <code>graphics</code> plots, <code>grid</code> graphics plots, and <code>loon</code> plots.</p>
<p>It is similar to <code>pairs</code> plots but allows many many more plots to be displayed. From the introductory vignette:</p>
<blockquote>
<p>“A zenplot can show the same information as a pairs plot but with two important display differences.</p>
<p>First, the matrix organization of the pairs layout is replaced by the “zig-zag” layout of zenplot. Second, the number of plots produced is about half that of a pairs plot allowing each plot in a zenplot to be given more visual space."</p>
</blockquote>
</div>
<div id="specialty-loon-extensions---loon-specialty-packages" class="section level3">
<h3 class="hasAnchor">
<a href="#specialty-loon-extensions---loon-specialty-packages" class="anchor"></a>Specialty <code>loon</code> extensions - <code>loon.&lt;specialty&gt;</code> packages</h3>
<p>There are/will be other packages available which build on <code>loon</code>. Those developed by us are typically prefixed with <code>loon</code> (e.g. <code>loon.ggplot</code>)</p>
<p>These will typically be on CRAN when ready, but development versions are accessible from our various <code>github</code> repositories. For example,</p>
<ul>
<li><a href="https://github.com/rwoldford" class="uri">https://github.com/rwoldford</a></li>
<li><a href="https://github.com/waddella" class="uri">https://github.com/waddella</a></li>
</ul>
<p>There you can see what is coming up.</p>
<hr>
</div>
</div>
<div id="more-on-grid-graphics-and-loon" class="section level2">
<h2 class="hasAnchor">
<a href="#more-on-grid-graphics-and-loon" class="anchor"></a>More on grid graphics and loon</h2>
<p>Graphics in the <code>grid</code> package are built up from graphical objects or <code>grobs</code>.</p>
<p>In <code>loon</code>, the functions <code><a href="../reference/grid.loon.html">grid.loon()</a></code> and <code><a href="../reference/loonGrob.html">loonGrob()</a></code> construct <code>grobs</code> from loon plots which can then be used as any other <code>grob</code> in <code>grid</code></p>
<p>For example, when transformed to <code>grid</code>, the loon plot <code>p</code> structure becomes a <code>gTree</code> in <code>grid</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">gp &lt;-<span class="st"> </span><span class="kw"><a href="../reference/loonGrob.html">loonGrob</a></span>(p)
gp</code></pre></div>
<pre><code>## gTree[GRID.gTree.32]</code></pre>
<p>This simply produces the grid data structure corresponding to the current state of the loon plot <code>p</code>, as can be seen from listing its contents:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(grid)
<span class="kw"><a href="https://www.rdocumentation.org/packages/grid/topics/grid.ls">grid.ls</a></span>(gp)  <span class="co"># lists the contents of the grob</span></code></pre></div>
<p>The grob <code>gp</code> could now be used with all the functionality of the <code>grid</code> package.</p>
<p>Note that all of the elements of a loon plot appear in the grob, either explicitly or, if they were not drawn in the loon plot, as an empty <code>grob</code> containing the relevant arguments to drawing them.</p>
<p>Another function in loon to help that is the <code><a href="../reference/grid.loon.html">grid.loon()</a></code> function</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(grid)
<span class="kw"><a href="https://www.rdocumentation.org/packages/grid/topics/grid.newpage">grid.newpage</a></span>()
<span class="kw"><a href="../reference/grid.loon.html">grid.loon</a></span>(p)</code></pre></div>
<p>will display <code>p</code> as a <code>grid</code> graphic … and all that entails.</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li>
<a href="#l_plot-the-basic-loon-plot"><code><a href="--/reference/l_plot-html">l_plot()</a></code> the basic <code>loon</code> plot</a><ul class="nav nav-pills nav-stacked">
<li><a href="#direct-manipulation-on-the-plot">Direct manipulation on the plot</a></li>
      <li><a href="#the-inspector-interacting-with-the-plot">The inspector – interacting with the plot</a></li>
      <li><a href="#more-on-direct-manipulation">More on direct manipulation</a></li>
      <li><a href="#programmatic-manipulation">Programmatic manipulation</a></li>
      <li><a href="#adding-layers">Adding layers</a></li>
      <li><a href="#syntax-loons-l_plot-is-like-base-graphics-plot">Syntax: loon’s <code><a href="--/reference/l_plot-html">l_plot()</a></code> is like base graphics <code><a href="https://www-rdocumentation-org/packages/graphics/topics/plot">plot()</a></code></a></li>
      </ul>
</li>
      <li><a href="#l_hist-the-loon-histogram"><code><a href="--/reference/l_hist-html">l_hist()</a></code> the <code>loon</code> histogram</a></li>
      <li>
<a href="#linking">Linking</a><ul class="nav nav-pills nav-stacked">
<li><a href="#linkinggroup"><code>linkingGroup</code></a></li>
      <li><a href="#linking-many-plots">linking many plots</a></li>
      <li><a href="#linkingkey"><code>linkingKey</code></a></li>
      </ul>
</li>
      <li><a href="#three-dimensional-plots---l_plot3d">Three dimensional plots - <code>l_plot3D</code></a></li>
      <li>
<a href="#extras">Extras</a><ul class="nav nav-pills nav-stacked">
<li><a href="#more-examples">More examples</a></li>
      <li><a href="#extensions-to-loon-via-other-packages">Extensions to loon via other packages</a></li>
      <li><a href="#more-on-grid-graphics-and-loon">More on grid graphics and loon</a></li>
      </ul>
</li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Adrian Waddell, R. Wayne Oldford.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
</div>

  

  </body>
</html>
