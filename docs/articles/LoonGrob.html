<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>LoonGrob • loon</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="LoonGrob">
<meta property="og:description" content="loon">
<meta property="og:image" content="/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">loon</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.3.8</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../articles/introduction.html">Intro</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/introduction.html">Introduction</a>
    </li>
    <li>
      <a href="../articles/savingLoonPlots.html">Saving loon plots</a>
    </li>
    <li>
      <a href="../articles/logicalQueries.html">Logical queries in interactive graphics</a>
    </li>
    <li>
      <a href="../articles/minorities.html">Analysis example</a>
    </li>
    <li>
      <a href="../articles/teaching-example-smoothing.html">Teaching example</a>
    </li>
    <li>
      <a href="../articles/loonGrob.html">loonGrob</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Videos
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="https://youtu.be/JFJcg855HcQ">the (not so) humble (interactive) histogram</a>
    </li>
    <li>
      <a href="https://youtu.be/mMJllGOuDLY">3D interactive scatterplots</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/great-northern-diver/loon">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="LoonGrob_files/header-attrs-2.10/header-attrs.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>LoonGrob</h1>
                        <h4 class="author">Wayne Oldford, Zehao Xu</h4>
            
            <h4 class="date">20/04/2020</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/great-northern-diver/loon/blob/master/vignettes/LoonGrob.Rmd"><code>vignettes/LoonGrob.Rmd</code></a></small>
      <div class="hidden name"><code>LoonGrob.Rmd</code></div>

    </div>

    
    
<hr>
<div id="motivation" class="section level2">
<h2 class="hasAnchor">
<a href="#motivation" class="anchor"></a>Motivation</h2>
<p>The <code>loon</code> package is mainly designed for interactive data exploration. After exploring the events of interest, we need a tool to turn the interactive charts static either for storage or publication. A simple screen-shot is an obvious choice, however it has several drawbacks. First, the plot’s clipping region is very arbitrary. It would be hard to unify all images’ margins. Second, fine details cannot be added programmatically afterwards.</p>
<p>The <code>grid</code> graphics, created by <em>Paul Murrell</em>, is one of the most fundamental graphics in <code>R</code>. It provides a low-level, general purpose graphics system for producing a wide variety of plots. Many well-known graphical systems, e.g. <code>lattice</code> and <code>ggplot2</code>, use <code>grid</code> to draw plots.</p>
<p>With <code>loonGrob</code>, one can turn an interactive <code>loon</code> widget to a <code>grid</code> object either for further use or adding some fine details that analyst cannot accomplish directly in <code>loon</code>.</p>
</div>
<div id="loon-grid" class="section level2">
<h2 class="hasAnchor">
<a href="#loon-grid" class="anchor"></a><code>loon</code> –&gt; <code>grid</code>
</h2>
<p>Begin with a classic data set in R – <code>mtcars</code> which contains 32 automobiles and 11 (numeric) variables.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://great-northern-diver.github.io/loon/">loon</a></span><span class="op">)</span>
<span class="va">p</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/with.html">with</a></span><span class="op">(</span><span class="va">mtcars</span>, <span class="fu"><a href="../reference/l_plot.html">l_plot</a></span><span class="op">(</span><span class="va">mpg</span>, <span class="va">hp</span>, 
                         size <span class="op">=</span> <span class="fl">8</span>,
                         showScales <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p>Here, <code>p</code> is a <code>loon</code> widget. The aesthetics attributes can be accessed either by function <code><a href="../reference/l_cget.html">l_cget()</a></code> or a simple <code><a href="https://rdrr.io/r/base/Extract.html">[</a></code>, as in</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># x coordinates</span>
<span class="va">p</span><span class="op">[</span><span class="st">'x'</span><span class="op">]</span></code></pre></div>
<pre><code>##  [1] 21.0 21.0 22.8 21.4 18.7 18.1 14.3 24.4 22.8 19.2 17.8 16.4 17.3 15.2 10.4
## [16] 10.4 14.7 32.4 30.4 33.9 21.5 15.5 15.2 13.3 19.2 27.3 26.0 30.4 15.8 19.7
## [31] 15.0 21.4</code></pre>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># point size</span>
<span class="va">p</span><span class="op">[</span><span class="st">'size'</span><span class="op">]</span></code></pre></div>
<pre><code>##  [1] 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8</code></pre>
<p>These returned values always reflect the current states of <code>p</code>. For example, suppose the size of points is modified to <em>6</em> by direct manipulations on the plot, call <code>p['size']</code>, a length 32 vector of <em>6</em> is returned. With this handy “querying tool”, all essential elements of a loon widget can be accessed to construct a selfsame <code>grid</code> graphics, as in</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">g0</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/loonGrob.html">loonGrob</a></span><span class="op">(</span><span class="va">p</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="va">g0</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] "gTree" "grob"  "gDesc"</code></pre>
<p>Here, <code>g0</code> is a <code>gTree</code> object, a data structure in <code>grid</code> who has other <code>grob</code>s (a description of a graphical item. These basic classes provide default behavior for validating, drawing, and modifying graphical objects in <code>grid</code> graphics) as children. To draw this <code>gTree</code>, one can call function <code><a href="https://rdrr.io/r/grid/grid.draw.html">grid.draw()</a></code>.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va">grid</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/grid/grid.newpage.html">grid.newpage</a></span><span class="op">(</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/grid/grid.draw.html">grid.draw</a></span><span class="op">(</span><span class="va">g0</span><span class="op">)</span></code></pre></div>
<p><img src="LoonGrob_files/figure-html/draw%20graphics-1.png" width="60%" style="display: block; margin: auto;"></p>
<p>Then, a nearly identical plot is displayed. Alternatively, a simple way to create a static plot is to call the generic <code>R</code> function <code><a href="https://rdrr.io/r/graphics/plot.default.html">plot()</a></code>, as in</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># `p` is a loon widget</span>
<span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">p</span><span class="op">)</span></code></pre></div>
<p>Object <code>g0</code> is a rich data structure containing all elements of this plot. Function <code>grid.ls</code> produces the <code>g0</code> data structure.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/grid/grid.ls.html">grid.ls</a></span><span class="op">(</span><span class="va">g0</span><span class="op">)</span></code></pre></div>
<pre><code>## GRID.gTree.1
##   l_plot
##     bounding box
##     loon plot
##       guides
##         guides background
##         guidelines: xaxis (major), x = 15
##         guidelines: xaxis (major), x = 25
##         guidelines: xaxis (major), x = 35
##         guidelines: xaxis (minor), x = 10
##         guidelines: xaxis (minor), x = 20
##         guidelines: xaxis (minor), x = 30
##         guidelines: yaxis (major), y = 100
##         guidelines: yaxis (major), y = 200
##         guidelines: yaxis (major), y = 300
##         guidelines: yaxis (minor), y = 50
##         guidelines: yaxis (minor), y = 150
##         guidelines: yaxis (minor), y = 250
##         guidelines: yaxis (minor), y = 350
##       labels
##         x label
##         y label
##         title: textGrob arguments
##       axes
##         x axis
##           major
##           ticks
##           labels
##         y axis
##           major
##           ticks
##           labels
##       clipping region
##       l_plot_layers
##         scatterplot
##           points: primitive glyphs
##       boundary rectangle</code></pre>
<p>The following Figure can better reveal the hierarchy structure.</p>
<p><img src="images/loonGrob/loonGrobHierarchy.PNG" width="80%" style="display: block; margin: auto;"></p>
<p>In this Figure, the labels represent the <code>loonGrob</code> names and the solid line represents the <strong>hierarchy</strong>. All labels in the curly braces are other potential options (depending on the <code>loon</code> plot) under this level. So far the apex string is <strong>l_plot</strong>, the string beneath the <strong>loon plot</strong> is <strong>l_plot_layers</strong> and <strong>scatterplot</strong> comes under <strong>l_plot_layers</strong>. Suppose the <code>p</code> is a <code>loon</code> histogram, then the apex string would be <strong>l_hist</strong> and the label name beneath the <strong>loon plot</strong> would be <strong>l_hist_layers</strong>, etc.</p>
<p>With these labels, one can retrieve, edit or even replace any fine details of this plot. For example, one can retrieve the “xlabel” and “ylabel” <code>grob</code>s as in</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># retrieve xlabel grob</span>
<span class="va">xlabelGrob</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/grid/grid.get.html">getGrob</a></span><span class="op">(</span><span class="va">g0</span>, <span class="st">"x label"</span><span class="op">)</span>
<span class="va">xlabelGrob</span></code></pre></div>
<pre><code>## text[x label]</code></pre>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># retrieve ylabel grob</span>
<span class="va">ylabelGrob</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/grid/grid.get.html">getGrob</a></span><span class="op">(</span><span class="va">g0</span>, <span class="st">"y label"</span><span class="op">)</span>
<span class="va">ylabelGrob</span></code></pre></div>
<pre><code>## text[y label]</code></pre>
<p>Then, give more meaningful “label” names</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">g0</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/grid/grid.set.html">setGrob</a></span><span class="op">(</span>
  gTree <span class="op">=</span> <span class="va">g0</span>,
  gPath <span class="op">=</span> <span class="st">"x label"</span>,
  newGrob <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/grid/grid.edit.html">editGrob</a></span><span class="op">(</span><span class="va">xlabelGrob</span>, 
                     label <span class="op">=</span> <span class="st">"Miles/(US) gallon"</span><span class="op">)</span>
<span class="op">)</span>
<span class="va">g0</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/grid/grid.set.html">setGrob</a></span><span class="op">(</span>
  gTree <span class="op">=</span> <span class="va">g0</span>,
  gPath <span class="op">=</span> <span class="st">"y label"</span>,
  newGrob <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/grid/grid.edit.html">editGrob</a></span><span class="op">(</span><span class="va">ylabelGrob</span>, 
                     label <span class="op">=</span> <span class="st">"Gross horsepower"</span><span class="op">)</span>
<span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/grid/grid.newpage.html">grid.newpage</a></span><span class="op">(</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/grid/grid.draw.html">grid.draw</a></span><span class="op">(</span><span class="va">g0</span><span class="op">)</span></code></pre></div>
<p><img src="LoonGrob_files/figure-html/modify%20grob-1.png" width="60%" style="display: block; margin: auto;"></p>
<p>Here “xlabel” and “ylabel” are altered to “Miles/(US) gallon” and “Gross horsepower” respectively.</p>
<p>Graphical system <code>loon</code> uses 12 digit hexadecimal color resulting the missing transparency. Fortunately, transparency is accommodated in <code>grid</code> graphics so that one can set the <code>alpha</code> values after the transformation, as in</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">loonPointsGrob</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/grid/grid.get.html">getGrob</a></span><span class="op">(</span><span class="va">g0</span>, <span class="st">"points: primitive glyphs"</span><span class="op">)</span>
<span class="co"># alter `gpar` "Grid graphical PARameters"</span>
<span class="va">newLoonPointsGrob</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/grid/grid.edit.html">editGrob</a></span><span class="op">(</span>
  <span class="va">loonPointsGrob</span>, 
  gp <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/grid/gpar.html">gpar</a></span><span class="op">(</span>
    fill <span class="op">=</span> <span class="fu"><a href="../reference/as_hex6color.html">as_hex6color</a></span><span class="op">(</span><span class="va">p</span><span class="op">[</span><span class="st">'color'</span><span class="op">]</span><span class="op">)</span>,
    col <span class="op">=</span> <span class="fu"><a href="../reference/l_getOption.html">l_getOption</a></span><span class="op">(</span><span class="st">"foreground"</span><span class="op">)</span>,
    fontsize <span class="op">=</span> <span class="fl">20</span>, <span class="co"># give a larger point size,</span>
    alpha <span class="op">=</span> <span class="fl">0.3</span> <span class="co"># turn color transparent</span>
  <span class="op">)</span>
<span class="op">)</span>
<span class="co"># update loon points grob</span>
<span class="va">g0</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/grid/grid.set.html">setGrob</a></span><span class="op">(</span>
  gTree <span class="op">=</span> <span class="va">g0</span>,
  gPath <span class="op">=</span> <span class="st">"points: primitive glyphs"</span>,
  newGrob <span class="op">=</span> <span class="va">newLoonPointsGrob</span>
<span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/grid/grid.newpage.html">grid.newpage</a></span><span class="op">(</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/grid/grid.draw.html">grid.draw</a></span><span class="op">(</span><span class="va">g0</span><span class="op">)</span></code></pre></div>
<p><img src="LoonGrob_files/figure-html/alpha-1.png" width="60%" style="display: block; margin: auto;"></p>
<p>After modification, the points are transparent and the size gets larger.</p>
</div>
<div id="what-if" class="section level2">
<h2 class="hasAnchor">
<a href="#what-if" class="anchor"></a>What if…</h2>
<div id="axes-labels-and-guides-are-invisible" class="section level3">
<h3 class="hasAnchor">
<a href="#axes-labels-and-guides-are-invisible" class="anchor"></a>Axes, Labels and Guides are Invisible?</h3>
<p>All labels shown in the Figure “hierarchy” are within a certain condition that <strong>they are invisible</strong>. What if they are hidden? Here, we turn the “xlabel” and “ylabel” off and construct a new <code>loonGrob</code> <code>g1</code></p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">p</span><span class="op">[</span><span class="st">'showLabels'</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="cn">FALSE</span>
<span class="va">g1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/loonGrob.html">loonGrob</a></span><span class="op">(</span><span class="va">p</span><span class="op">)</span></code></pre></div>
<p>Suppose we still want to retrieve the “xlabel” and “ylabel”</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">xlabelGrob</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/grid/grid.get.html">getGrob</a></span><span class="op">(</span><span class="va">g1</span>, <span class="st">"x label"</span><span class="op">)</span>
<span class="va">xlabelGrob</span></code></pre></div>
<pre><code>## NULL</code></pre>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">ylabelGrob</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/grid/grid.get.html">getGrob</a></span><span class="op">(</span><span class="va">g1</span>, <span class="st">"y label"</span><span class="op">)</span>
<span class="va">ylabelGrob</span></code></pre></div>
<pre><code>## NULL</code></pre>
<p>Rather than two <code>textGrob</code>s we have seen before, <code>NULL</code> is returned. In other words, there are no “x label” and “y label” names under <code>g0</code>. It is because, once the axes, labels or guide lines are invisible in <code>loon</code>, when it is transformed to <code>grid</code> graphics, the hidden elements would be stored into <code><a href="https://rdrr.io/r/grid/grid.grob.html">grob()</a></code> (does not produce any displays) and the name would be pasted with a suffix <em>: … arguments</em> where <em>…</em> represents the <code>grob</code> function used to display this object. For example, in our case, the suffix is “: textGrob arguments”.</p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">xlabelGrob</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/grid/grid.get.html">getGrob</a></span><span class="op">(</span><span class="va">g1</span>, <span class="st">"x label: textGrob arguments"</span><span class="op">)</span>
<span class="va">xlabelGrob</span></code></pre></div>
<pre><code>## grob[x label: textGrob arguments]</code></pre>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">ylabelGrob</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/grid/grid.get.html">getGrob</a></span><span class="op">(</span><span class="va">g1</span>, <span class="st">"y label: textGrob arguments"</span><span class="op">)</span>
<span class="va">ylabelGrob</span></code></pre></div>
<pre><code>## grob[y label: textGrob arguments]</code></pre>
<p>These <code>grob</code>s contain the relevant arguments to drawing them. The main benefit is that for some elements that they were not drawn in the <code>loon</code> plot, users are still able to retrieve their arguments in <code>grid</code> for further analysis.</p>
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">xlabelGrob</span><span class="op">$</span><span class="va">label</span></code></pre></div>
<pre><code>## [1] "mpg"</code></pre>
<div class="sourceCode" id="cb29"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">ylabelGrob</span><span class="op">$</span><span class="va">label</span></code></pre></div>
<pre><code>## [1] "hp"</code></pre>
</div>
<div id="points" class="section level3">
<h3 class="hasAnchor">
<a href="#points" class="anchor"></a>Points</h3>
<ul>
<li>
<p>are Invisible?</p>
<p>Unfortunately, if points are invisible, their coordinates and aesthetics attributes would be missing in the <code>loonGrob</code>. Technically speaking, it is possible to include these invisible points inside the <code>loonGrob</code>, however, what stops us doing so is that the data structure may be changed – a <code>pointsGrob</code> would be replaced to a <code>gTree</code> with children <code>pointsGrob</code>. Each <code>pointsGrob</code> only draws an individual point to maintain the display order. We are not sure whether it is worth the efforts.</p>
</li>
<li>
<p>are Non-primitive Glyphs?</p>
<p><code>loon</code> provides non-primitive glyphs, e.g. text glyph, image glyph, polygon glyph and etc. Once a non-primitive glyph is drawn, the <code>grob</code> label beneath <strong>scatterplot</strong> would be <strong>points: mixed glyph</strong>.</p>
<div class="sourceCode" id="cb31"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># add text glyph</span>
<span class="va">carNames</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/l_glyph_add_text.html">l_glyph_add_text</a></span><span class="op">(</span><span class="va">p</span>, text <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/colnames.html">rownames</a></span><span class="op">(</span><span class="va">mtcars</span><span class="op">)</span><span class="op">)</span>
<span class="va">p</span><span class="op">[</span><span class="st">'glyph'</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="va">carNames</span>
<span class="co"># loonGrob</span>
<span class="va">g2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/loonGrob.html">loonGrob</a></span><span class="op">(</span><span class="va">p</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/grid/grid.get.html">getGrob</a></span><span class="op">(</span><span class="va">g2</span>, <span class="st">"points: mixed glyphs"</span><span class="op">)</span></code></pre></div>
<pre><code>## gTree[points: mixed glyphs]</code></pre>
<p>It returns a <code>gTree</code> object and each child is a <code>textGrob</code>.</p>
</li>
</ul>
</div>
</div>
<div id="beyond-static-graphics" class="section level2">
<h2 class="hasAnchor">
<a href="#beyond-static-graphics" class="anchor"></a>Beyond Static Graphics</h2>
<p>A <code>loonGrob</code> is a static version of a <code>loon</code> plot. Not only creating a plot, it is a rich data structure. All elements in a <code>loonGrob</code> have meaningful names and users are able to fully access and edit it. Due to these nice features, package <code>loon.shiny</code> is dependent on it. This is a package to render a <code>loon</code> plot into a <code>shiny</code> app. The interactivity is realized by manipulating the static <code>loonGrob</code>. More details are introduced <a href="https://github.com/great-northern-diver/loon.shiny">here</a>.</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Adrian Waddell, R. Wayne Oldford.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
